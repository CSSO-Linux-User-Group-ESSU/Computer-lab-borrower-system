{% extends "borrower_app/control_panel.html" %}

{% block content %}
    <h1>Borrower Information Form</h1>

    <form method="POST" id="borrower-form" action="{% url 'pending_items' %}">
        {% csrf_token %}
        
        <!-- Last Name
        <div class="form-row">
            <div class="form-field">
                <label for="last_name">Last Name:</label>
                <input type="text" id="last_name" name="last_name" required>
            </div>

            <div class="form-field">
                <label for="first_name">First Name:</label>
                <input type="text" id="first_name" name="first_name" required>
            </div>

            <div class="form-field">
                <label for="middle_name">Middle Name:</label>
                <input type="text" id="middle_name" name="middle_name" required>
            </div>
        </div>

        
        <div class="form-row">
            <div class="form-field">
                <label for="item_name">Item Name:</label>
                <input type="text" id="item_name" name="item_name" required>
            </div>

            <div class="form-field">
                <label for="item_quantity">Item Quantity:</label>
                <input type="number" id="item_quantity" name="item_quantity" required>
            </div>
        </div>

        
        <div class="form-field">
            <label for="date_borrowed">Date Borrowed:</label>
            <input type="date" id="date_borrowed" name="date_borrowed" required>
        </div> -->
        
        {{form.as_p}}

        <button type="submit">Confirm and Save</button>
    </form>

    <script>
        window.onload = function () {
            fetch('api/get-borrower-data/')
                .then(response => response.json())
                .then(data => {
                    document.querySelector('input[name="last_name"]').value = data.last_name;
                    document.querySelector('input[name="first_name"]').value = data.first_name;
                    document.querySelector('input[name="middle_name"]').value = data.middle_name;
                    document.querySelector('input[name="item_name"]').value = data.item_name;
                    document.querySelector('input[name="item_quantity"]').value = data.item_quantity;
                    document.querySelector('input[name="date_borrowed"]').value = data.date_borrowed;
                })
                .catch(error => console.error('Error loading file:', error));
        };
    </script>
{% endblock %}
